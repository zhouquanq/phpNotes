(function(b){b.ifixpng=function(c){b.ifixpng.pixel=c};b.ifixpng.regexp={bg:/^url\(["']?(.*\.png([?].*)?)["']?\)$/i,img:/.*\.png([?].*)?$/i},b.ifixpng.getPixel=function(){return b.ifixpng.pixel||"/themed/common/img/pixel.gif"};var a={base:b("base").attr("href"),ltie7:b.browser.msie&&b.browser.version<7,filter:function(c){return"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=crop,src='"+c+"')"}};b.fn.ifixpng=a.ltie7?function(){function c(h,g,e,d,f){h.css({filter:a.filter(g),width:e,height:d}).attr({src:b.ifixpng.getPixel()}).positionFix()}return this.each(function(){var f=b(this);if(f.is("img")||f.is("input")){var h,e;if(this.src&&this.src.match(b.ifixpng.regexp.img)){h=(a.base&&this.src.substring(0,1)!="/"&&this.src.indexOf(a.base)===-1)?a.base+this.src:this.src;if(!this.width||!this.height){b(new Image()).one("load",function(){c(f,h,this.width,this.height);b(this).remove()}).attr("src",h)}else{c(f,h,this.width,this.height)}}}else{if(this.style){var j=f.css("backgroundImage");if(j&&j.match(b.ifixpng.regexp.bg)&&this.currentStyle.backgroundRepeat=="no-repeat"){j=RegExp.$1;var d=this.currentStyle.backgroundPositionX||0,k=this.currentStyle.backgroundPositionY||0;if(d||k){var g={},e;if(typeof d!="undefined"){if(d=="left"){g.left=0}else{if(d=="right"){g.right=f.width()%2===1?-1:0}else{g.left=d}}}if(typeof k!="undefined"){if(k=="bottom"){g.bottom=f.height()%2===1?-1:0}else{if(k=="top"){g.top=0}else{g.top=k}}}e=new Image();b(e).one("load",function(){var l,p,n={},o;if(/center|%/.test(g.top)){n.top="(this.parentNode.offsetHeight - this.offsetHeight) * "+(g.top=="center"?0.5:(parseInt(g.top)/100));delete g.top}if(/center|%/.test(g.left)){n.left="(this.parentNode.offsetWidth - this.offsetWidth) * "+(g.left=="center"?0.5:(parseInt(g.left)/100));delete g.left}f.positionFix().css({backgroundImage:"none"}).prepend(b("<div></div>").css(g).css({width:this.width,height:this.height,position:"absolute",filter:a.filter(j)}));if(n.top||n.left){var m=f.children(":first")[0];for(o in n){m.style.setExpression(o,n[o],"JavaScript")
}}b(this).remove()});e.src=j}else{f.css({backgroundImage:"none",filter:a.filter(j)})}}}}})}:function(){return this};b.fn.positionFix=function(){return this.each(function(){var c=b(this);if(c.css("position")!="absolute"){c.css({position:"relative"})}})}})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(d){d.fn.bgiframe=(d.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(a){a=d.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},a);var b='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+a.src+'"style="display:block;position:absolute;z-index:-1;'+(a.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(a.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":c(a.top))+";left:"+(a.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(a.left))+";width:"+(a.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":c(a.width))+";height:"+(a.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":c(a.height))+';"/>';return this.each(function(){if(d(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(b),this.firstChild)}})}:function(){return this});d.fn.bgIframe=d.fn.bgiframe;function c(a){return a&&a.constructor===Number?a+"px":a}})(jQuery);
(function(a){a.extend({documentMask:function(b){var c=a.extend({opacity:0.3,z:50,bgcolor:"#000"},b);a('<div class="jquery_addmask">&nbsp;</div>').appendTo(document.body).css({position:"absolute",top:"0px",left:"0px","z-index":c.z,width:document.documentElement.clientWidth,height:a(document).height(),"background-color":c.bgcolor,opacity:c.opacity}).show().click(function(){}).bgiframe();return this}})})(jQuery);(function(a){a.fn.jMarquee=function(d){d=a.extend({speed:120,step:1,direction:"up",visible:1},d||{});var g=0;var b=a(this);var j=a("ul",b);var c=a("li",j);var e=c.size();if(d.direction=="left"){c.css("float","left")}var m=c.innerWidth();var k=c.height();var h=k*e;var f=m*e;if(e>d.visible){j.append(c.slice(0,d.visible).clone());li=a("li",j);e=li.size();b.css({position:"relative",overflow:"hidden"});j.css({position:"relative",margin:"0",padding:"0","list-style":"none"});li.css({margin:"0",padding:"0",position:"relative"});switch(d.direction){case"left":b.css("width",(m*d.visible)+"px");j.css("width",(m*e)+"px");li.css("float","left");break;case"up":b.css({height:(k*d.visible)+"px"});j.css("height",(k*e)+"px");break}var l=setInterval(n,d.speed);j.hover(function(){clearInterval(l)},function(){l=setInterval(n,d.speed)})}function n(){if(d.direction=="left"){if(b.scrollLeft()>=f){b.scrollLeft(0)}else{var p=b.scrollLeft();p+=parseInt(d.step);b.scrollLeft(p)}}if(d.direction=="up"){if(b.scrollTop()>=h){b.scrollTop(0)}else{var o=b.scrollTop();o+=parseInt(d.step);b.scrollTop(o)}}}}})(jQuery);$(function(){if($.browser.msie){if($.browser.version=="6.0"){$(".ifixpng").ifixpng()}}});var engOnly=function(b){for(i=0;i<b.length;i++){var d=b.substr(i,1);var a=escape(d);if(a.substring(0,2)=="%u"){return false}else{return true}}};var emailOnly=function(b){var a=/[_a-zA-Z\d\-\.]+@[_a-zA-Z\d\-]+(\.[_a-zA-Z\d\-]+)+$/;if(a.test(b)){return true}else{return false}};var mobileOnly=function(b){var a=/^0{0,1}(13[0-9]|14[0-9]|15[0-9]|18[0-9])[0-9]{8}$/;if(a.test(b)){return true}else{return false}};var numOnly=function(b){var a=/^[0-9]{1,20}$/;
if(a.test(b)){return true}else{return false}};var telOnly=function(b){var a=/^\({0,1}[0-9]{3}\){0,1}\-\({0,1}[0-9]{4}\){0,1}\-[0-9]{7,}$|^\({0,1}[0-9]{4}\){0,1}\-[0-9]{7,}$|^[0-9]{7,}$/;if(a.test(b)){return true}else{return false}};var phoneOnly=function(b){var a=/^((\+86\-{0,1})|(086\-{0,1})|'')?(\d{3,4})\-{0,1}(\d{7,8})$/;if(a.test(b)){return true}else{return false}};var idOnly=function(b){var a=/(^\d{15}$)|(^\d{17}([0-9]|X)$)/;if(a.test(b)){return true}else{return false}};var letterOnly=function(b){var a=/^\w+[\w\s]+\w+$/;if(a.test(b)){return true}else{return false}};var codeOnly=function(b){var a=/^[1-9]\d{5}(?!\d)/;if(a.test(b)){return true}else{return false}};var dateOnly=function(e){var c=e.split("-");if(c.length!=3){return false}var f=c[0];var a=c[1];var b=c[2];if(!numOnly(f)||!numOnly(a)||!numOnly(b)){return false}if(f.length!=4||a.length!=2||b.length!=2){return false}f=Number(f);a=Number(a);b=Number(b);if(f<1900||f>2050||a<1||a>12||b<1||b>31){return false}if((a==4||a==6||a==9||a==11)&&b>30){return false}if((f%100!=0&&f%4==0)||f%400==0){if(a==2&&b>29){return false}}else{if(a==2&&b>28){return false}}return true};var scrollTable=function(e){if(!document.getElementById(e)){return false}var c=50;var g=document.getElementById(e);var f=document.getElementById(e+"-a");var d=document.getElementById(e+"-b");d.innerHTML=f.innerHTML;function a(){if(d.offsetHeight-g.scrollTop<=0){g.scrollTop-=f.offsetHeight}else{g.scrollTop++}}var b=setInterval(a,c);g.onmouseover=function(){clearInterval(b)};g.onmouseout=function(){b=setInterval(a,c)}};var sysScrollLeft=function(h){if(!document.getElementById(h)){return false}if(!$.support.opacity){var g=$("#"+h);g.width(0);g.width(g.parent().width())}var c=20;var f=document.getElementById(h+"-b");var e=document.getElementById(h+"-a");var d=document.getElementById(h);f.innerHTML=e.innerHTML;function a(){if(f.offsetWidth-d.scrollLeft<=0){d.scrollLeft-=e.offsetWidth}else{d.scrollLeft++}}var b=setInterval(a,c);d.onmouseover=function(){clearInterval(b)};d.onmouseout=function(){b=setInterval(a,c)
}};function sysProGalleryResize(){var e=$("#sys-pro-gallery-1-picholder img");var a=e.width();var b=e.height();var c=Number((e.attr("rel").split(","))[0]);var d=Number((e.attr("rel").split(","))[1]);if(a<=c&&b<=d){}if(a>c&&b<=d){e.width(c)}if(a<=c&&b>d){e.height(d)}if(a>c&&b>d){if((a/b)>(c/d)){e.width(c)}else{e.height(d)}}}var sysScrollTop=function(a){if(!document.getElementById("block-products-"+a)){return false}$("#block-products-"+a).addClass("pro-scroll-y");$("#block-products-"+a).jMarquee({visible:2,step:2,direction:"up"})};$(function(){$("#menuSitenav li").hover(function(){$("#menuSitenav div").hide();$(this).addClass("open").find("div").fadeIn("slow");$(this).css({"z-index":"1"}).siblings().css({"z-index":"0"})},function(){$(this).removeClass("open").find("div").hide()});$("#ipt-keywords").focus(function(){if($(this).val()==langs.form.keywords_required){$(this).val("")}});$("#ipt-keywords").blur(function(){if($(this).val()==""){$(this).val(langs.form.keywords_required)}});$("ul.multimenu-2 span").click(function(){if($(this).is(".open")){$(this).parent().parent().removeClass("closed");$(this).removeClass().addClass("close")}else{if($(this).is(".close")){$(this).parent().parent().addClass("closed");$(this).removeClass().addClass("open")}}});$("form.form-validate").live("submit",function(){var F=$(this).find("input.required,select.required,textarea.required");for(var A=0;A<F.length;A++){if(F.eq(A).val()==""||F.eq(A).val()==null){alert(langs.form.error_uncomplete);F.eq(A).focus();return false}}var I=$(this).find("blockquote.error");if(I.length>1||(I.length==1&&!I.parent().is(".row-submit"))){alert(langs.form.error_wrong);return false}if($(this).is(".form-ajax")){var B=[];var A=0;$(this).find('input[name!=""]').each(function(){if(this.disabled||(this.checked==false&&(this.type=="checkbox"||this.type=="radio"))){}else{B[A++]=this.name+"="+$(this).val()}});$(this).find('select[name!=""]').each(function(){B[A++]=this.name+"="+$(this).val()});$(this).find('textarea[name!=""]').each(function(){B[A++]=this.name+"="+$(this).val()
});var D=B.join("&");var y=$(this).attr("method");var z=$(this).attr("action");var E=$(this).find("div.row-submit");if(E.find("blockquote").length<1){E.append("<blockquote></blockquote>")}var H=$(this).find('button[type="submit"]');H.attr("disabled",true);var C=$(this);var G=E.find("blockquote");G.removeClass().addClass("loading").text(langs.comment.submitting);$.ajax({type:y,url:z,data:D+"&data[ajaxsubmit]=1",dataType:"json",error:function(){H.removeAttr("disabled");G.removeClass().addClass("error").text(langs.comment.failed);var J=C.find("img.img-captcha");J.attr("src",J.attr("rel")+Math.random())},success:function(K){H.removeAttr("disabled");var J=C.find("img.img-captcha");J.attr("src",J.attr("rel")+Math.random());if(K.status=="failed"){G.removeClass().addClass("error").text(K.msg)}if(K.status=="success"){G.removeClass().addClass("accepted").text(K.msg);if(K.dowhat=="direct"){location.href=K.url}if(K.dowhat=="comment-insert"){$("#list-comments li").removeClass("entry-new");$("#list-comments").prepend('<li id="comment-'+K.comment.id+'" class="entry entry-new hide" rel="'+K.comment.id+'"><div class="clearfix entry-head"><span class="author">'+K.comment.author+" "+langs.comment.post_author+'</span><span class="meta"><span class="location">'+langs.comment.post_location+'<span class="grey">'+K.comment.location+'</span></span> <span class="time grey">'+K.comment.time+'</span></span></span></div><div class="entry-body"><div class="entry-content">'+K.comment.content+"</div></div></li>");$("#list-comments li.hide").slideDown("slow");C.find("input.ajax-clear:text,textarea.ajax-clear").val("")}}}});return false}});var a=function(A){if(A.is(".v-captcha")){return false}var E=A.val();var F=$.trim(E);var H=A.parent().parent();var D=H.find("span.tips");var B=D.text();var G=D.attr("rev");if(G==""||!G){G=D.attr("title")}if(G==""||!G){G=D.text()}if(G==""||!G){G=""}var C=A.attr("rec");if(C==""||!C){C=""}if(H.find("blockquote").length<1){H.append("<blockquote></blockquote>")}var z=H.find("blockquote");if(A.is(".required")&&(F==""||F==null)){z.removeClass().addClass("error").text(langs.form.tip_required)
}else{if(D.length<1){if(F!=""&&F!=null){z.removeClass().removeClass().addClass("accepted").text("")}else{z.remove()}}else{if(A.is(".v-length")&&C!=""&&(F.length<Number(C.split(",")[0])||F.length>Number(C.split(",")[1]))){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-clone")&&A.val()!=$("#"+A.attr("rel")).val()){z.removeClass().addClass("error").text(G);A.val("")}else{if(A.is(".v-username")){A.attr("readonly",true);z.removeClass().addClass("loading").text(langs.form.tip_user_checking);$.ajax({type:"post",url:"/members/checkUserName",dataType:"json",data:"data[m_name]="+E,cache:false,error:function(){A.attr("readonly",false);z.html('<span class="red">'+langs.form.tip_user_error+"</span>")},success:function(I){A.attr("readonly",false);if(I.status=="failed"){z.removeClass().addClass("error").text(I.msg)}if(I.status=="success"){z.removeClass().addClass("accepted").text(I.msg)}}})}else{if(A.is(".v-email")&&E!=""&&E!=null&&!emailOnly(E)){z.removeClass().addClass("error").text(langs.form.tip_wrongemail)}else{if(A.is(".v-number")&&E!=""&&E!=null&&!numOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-tel")&&E!=""&&E!=null&&!telOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-phone")&&E!=""&&E!=null&&!phoneOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-mobile")&&E!=""&&E!=null&&!mobileOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-id")&&E!=""&&E!=null&&!idOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-letter")&&E!=""&&E!=null&&!letterOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-code")&&E!=""&&E!=null&&!codeOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-date")&&E!=""&&E!=null&&!dateOnly(E)){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-newclone")&&$("#"+A.attr("rev")).val()!=E){z.removeClass().addClass("error").text(G)}else{if(A.is(".v-ajax")){var y=$(this).attr("rel");A.attr("readonly",true);z.removeClass().addClass("loading").text(langs.form.tip_checking);$.ajax({url:y+E,dataType:"json",cache:false,error:function(){A.attr("readonly",false);
z.html('<span class="red">'+langs.form.tip_user_error+"</span>")},success:function(I){A.attr("readonly",false);if(I.status=="failed"){z.removeClass().addClass("error").text(I.msg)}if(I.status=="success"){z.removeClass().addClass("accepted").text(I.msg)}}})}else{if(E!=""&&E!=null){z.removeClass().removeClass().addClass("accepted").text(B)}else{if(A.is(".v-newclone2")&&$("#"+A.attr("rev")).val()!=""&&$("#"+A.attr("rev")).val()!=E){z.removeClass().addClass("error").text(G);alert("a")}z.remove();D.show()}}}}}}}}}}}}}}}}}};$("form.form-validate input.text,form.form-validate textarea").live("focus",function(){var z=$(this).parent().parent();var y=z.find("span.tips");if(y.length<1){return false}var A=y.attr("title");if(A==""||A==null){A=y.text()}y.hide();if(z.find("blockquote").length<1){z.append("<blockquote></blockquote>")}z.find("blockquote").removeClass().text(A)});$("form.form-validate input.text,form.form-validate textarea").live("blur",function(){var y=$(this);setTimeout(function(){a(y)},500)});$('form.form-validate button[type="reset"],form.form-validate input[type="reset"]').live("click",function(){var y=$(this).parents("form");y.find("blockquote").remove();y.find("span.tips").show()});$("#ipt-num-count").keyup(function(){var z=$(this).val();$(this).val(z.replace(/^[^1-9]{1}|[^0-9]*/g,""));if(z!=""){var y=Number(z)*Number($("#txt-price").text());if(String(y).split(".").length<2){y+=".00"}else{if(String(y).split(".")[1].length<2){y+="0"}}$("#txt-cost").text(y)}});var n=function(){var C=$("#showpic-picholder img");var y=C.width();var z=C.height();var A=Number((C.attr("rel").split(","))[0]);var B=Number((C.attr("rel").split(","))[1]);if(y<=A&&z<=B){}if(y>A&&z<=B){C.width(A)}if(y<=A&&z>B){C.height(B)}if(y>A&&z>B){if((y/z)>(A/B)){C.width(A)}else{C.height(B)}}};if(document.getElementById("showpic-picholder")){n()}$("#showpic-gallery ul a").click(function(){if($(this).parent().is(".selected")){return false}var J=$(this).parent();var F=parseInt(J.css("width"));var A=parseInt(J.css("margin-right"));var E=parseInt(J.css("border-right-width"));
var G=parseInt(J.css("padding-right"));var B=parseInt(J.css("margin-left"));var H=parseInt(J.css("border-left-width"));var K=parseInt(J.css("padding-left"));var D=(F+A+E+G+B+H+K);var I=$("#showpic-gallery ul a").length;var z=(J.prevAll("li").length)+1;var y=0;if(z<(I-2)&&z>2){y=(-D)*(z-2)}if(z>(I-3)){y=(-D)*(I-4)}J.addClass("selected").siblings().removeClass("selected");var C=$(this).attr("href");$("#showpic-picholder").attr("href",C).find("img").attr("src",C);n();$(this).parents("ul").animate({left:y+"px"},{queue:false,duration:300});return false});$("#showpic-gallery a.button").click(function(){var y=$(this).parent().find("ul li.selected").prevAll("li").length;if(y==0&&$(this).is(".prev")){$(this).parent().find("ul a").eq(-1).click()}if(y==($(this).parent().find("ul li").length-1)&&$(this).is(".next")){$(this).parent().find("ul a").eq(0).click()}if($(this).is(".prev")){y--}if($(this).is(".next")){y++}$(this).parent().find("ul a").eq(y).click();return false});$("#showpic-gallery img").css({width:"48px",height:"36px","margin-top":"6px"});$("#form-comment img.img-captcha").click(function(){$(this).attr("src","/captcha/show/bookSend/?"+Math.random())});$("#captcha").keyup(function(y){$(this).val($(this).val().toUpperCase())});var p=function(){var B=$("#block-comments").attr("rel");var E=$(this).parents("li");var y=E.attr("rel");if($(this).find("blockquote").length<1){E.find("form").append("<blockquote></blockquote>")}var z=$(this).find("blockquote");var C=$(this).find("textarea").val();if(C==""||C==null){z.removeClass().addClass("error").text(langs.comment.reply_required);$(this).find("textarea").focus();return false}var A=$(this).find('input[type="submit"]');A.attr("disabled",true);z.removeClass().addClass("msg-loading").text(langs.comment.submitting);var D=$(this).parent();$.ajax({type:"post",url:$(this).attr("action"),dataType:"json",data:"data[id]="+y+"&data[b_recontent]="+C+"&data[controller]="+B,cache:false,error:function(G,F){z.removeClass().addClass("error").text(langs.comment.failed);A.attr("disabled",false)
},success:function(F){if(F.status=="failed"){z.removeClass().addClass("error").text(F.msg);A.attr("disabled",false)}else{if(F.status=="success"){D.html('<div class="reply-show"><div class="clearfix reply-head"><strong class="reply-author">'+langs.comment.reply_author+'</strong><span class="reply-operate"><a class="reply-edit" href="#">'+langs.comment.reply_edit+'</a><a class="reply-del" href="#">'+langs.comment.reply_del+'</a></span></div><div class="reply-body">'+F.msg+"</div></div>");D.find("a.reply-edit").click(h);D.find("a.reply-del").click(k)}else{z.removeClass().addClass("error").text(langs.comment.failed);A.attr("disabled",false)}}}});return false};$("#j-proview-loader-1 .pager .list a").live("click",function(){var y=$(this).attr("href");if(!y.length){return false}$.ajax({type:"post",url:y,data:"",dataType:"html",success:function(z){$("#j-proview-loader-1").html(z)}});return false});$("#j-proview-loader-2 .pager .list a").live("click",function(){var y=$(this).attr("href");if(!y.length){return false}$.ajax({type:"post",url:y,data:"",dataType:"html",success:function(z){$("#j-proview-loader-2").html(z)}});return false});var f=function(){var y=$(this).parents("form");if(y.prevAll().length>0){y.prev().show();y.remove()}else{y.parent().remove()}};var s=function(){var z=$(this).parents("li");var y=z.attr("rel");if(z.find("div.reply-show").length>0){alert(langs.comment.reply_double);return false}if(z.find("form").length>0){return false}$(this).parent().before('<div class="comment-reply"><form class="form" action="/admin/books/book_reply/'+y+'" method="post"><input name="id" type="hidden" value="'+y+'" /><textarea class="w20" name="reply" rows="4"></textarea><div class="buttons"><input class="submit" type="submit" value="'+langs.comment.reply_text+'" /> <input class="cancel" type="button" value="'+langs.comment.reply_cancel+'" /></div></form></div>');z.find("form").submit(p);z.find("form input.cancel").click(f);return false};$("#list-comments a.reply").click(s);var h=function(){var y=$(this).parents("li").attr("rel");
var A=$(this).parent().parent().next().html().replace(new RegExp("<br>","g"),"\n").replace(new RegExp("<BR>","g"),"\n\r");var z=$(this).parents("div.comment-reply");z.append('<form class="form" action="/admin/books/book_reply/'+y+'" method="post"><input name="id" type="hidden" value="'+y+'" /><textarea class="w20" name="reply" rows="4">'+A+'</textarea><div class="buttons"><input class="submit" type="submit" value="'+langs.comment.reply_text+'" /> <input class="cancel" type="button" value="'+langs.comment.reply_cancel+'" /></div></form>').find("div.reply-show").hide();z.find("form").submit(p);z.find("form input.cancel").click(f);return false};$("#list-comments a.reply-edit").click(h);var k=function(){var A=$("#block-comments").attr("rel");if($(this).attr("rel")=="loading"){return false}var y=$(this).parents("li").attr("rel");$(this).css({display:"inline-block","background-image":"url(/themed/common/img/icon/loading.gif)","background-repeat":"no-repeat","background-position":"left","padding-left":"25px",color:"#000"}).attr("rel","loading").text(langs.comment.deleting);var z=$(this);$.ajax({type:"post",url:"/admin/books/book_clear/"+y,data:"controller="+A,dataType:"json",cache:false,error:function(C,B){alert(langs.comment.delete_failed);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.reply_del)},success:function(B){if(B.status=="failed"){alert(B.msg);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.reply_del)}else{if(B.status=="success"){z.parent().parent().parent().parent().remove()}else{alert(langs.comment.delete_failed);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.reply_del)}}}});return false};$("#list-comments a.reply-del").click(k);var x=function(){var A=$("#block-comments").attr("rel");
if($(this).attr("rel")=="loading"){return false}var y=$(this).parent().parent().parent().attr("rel");$(this).css({display:"inline-block","background-image":"url(/themed/common/img/icon/loading.gif)","background-repeat":"no-repeat","background-position":"left","padding-left":"25px",color:"#000"}).attr("rel","loading").text(langs.comment.deleting);var z=$(this);$.ajax({type:"post",url:"/admin/books/book_delete/"+y,data:"controller="+A,dataType:"json",cache:false,error:function(C,B){alert(langs.comment.delete_failed);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.post_del)},success:function(B){if(B.status=="failed"){alert(B.msg);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.post_del)}else{if(B.status=="success"){z.parent().parent().parent().remove()}else{alert(langs.comment.delete_failed);z.css({display:"inline","background-image":"","background-repeat":"","background-position":"","padding-left":"0",color:""}).attr("rel","").text(langs.comment.post_del)}}}});return false};$("#list-comments a.comment-del").click(x);if(document.getElementById("slide-gallery-container")){var r=$("#slide-gallery-container");var g=r.attr("rel").split(",")[1];var e=r.find("li").length;r.width(g*e);$("#slide-gallery-prev,#slide-gallery-next").click(function(){var z=Number(r.attr("rel").split(",")[0]);if(e<(z+1)){return false}var y=Math.ceil(e/z);var A=Number(r.attr("rev"));if($(this).is(".ctrl-prev")){A--}if($(this).is(".ctrl-next")){A++}if(A<0||A>y-1){return false}var B=0-(A*g*z);r.attr("rev",A);r.animate({left:B+"px"},300);return false})}if(document.getElementById("sys-banner-1")){var l;$("#sys-banner-1-mask, #sys-banner-1-ctrl a").not(".current").fadeTo("fast",0.5);var m=function(){var y=$("#sys-banner-1-ctrl a.current");if(y.nextAll().length<1){$("#sys-banner-1-ctrl a").eq(0).click()}else{y.next().click()}};var o=function(){var y=$("#sys-banner-1-list img");
var z=y.eq(0).width();$("#sys-banner-1-list").width(z*y.length+100);$("#sys-banner-1-ctrl a").click(function(){clearTimeout(l);if($(this).is(".current")){return false}var A=$(this).prevAll().length;$("#sys-banner-1-list").animate({left:-A*z+"px"},500);$(this).fadeTo("fast",1).addClass("current").siblings().fadeTo("fast",0.5).removeClass("current");l=setTimeout(m,5000);return false});$("#sys-banner-1-ctrl a").eq(0).click()};o()}if(document.getElementById("sys-banner-2")){var w=$("#j-slider-list");var c=w.parent().width();if(document.getElementById("j-slider-ctrl")){$("#j-slider-ctrl em").fadeTo("fast",0.8);var q=null;$("#j-slider-ctrl li").mouseenter(function(){if(q){clearTimeout(q)}if($(this).is(".current")){return false}var y=$(this).prevAll().length;w.animate({left:-y*c+"px"},800);$(this).addClass("current").siblings().removeClass("current");q=setTimeout(m,5000);return false});var m=function(){var y=$("#j-slider-ctrl li.current");if(y.nextAll().length<1){$("#j-slider-ctrl li").eq(0).mouseenter()}else{y.next().mouseenter()}};$("#j-slider-ctrl li").eq(0).mouseenter()}else{if(document.getElementById("j-slider-page")){var b=null;var d=1;var v=w.find("a").length;var t=function(){if(!w.is(":animated")){if(d==1){w.animate({left:"-="+c*(v-1)},800);d=v}else{w.animate({left:"+="+c},800);d--}}};var u=function(){if(!w.is(":animated")){if(d==v){w.animate({left:"0px"},800);d=1}else{w.animate({left:"-="+c},800);d++}}};$("#sys-banner-2 a.prev").click(function(){t()});$("#sys-banner-2 a.next").click(function(){u()});b=setInterval(u,5000)}}}function j(){if(!document.getElementById("sys-pro-gallery-1-thumbs")){return false}var C=$("#sys-pro-gallery-1-thumbs a").length;$("#sys-pro-gallery-1-stat").html("<span>1</span> / "+C);if(C>6){$("#sys-pro-gallery-1-thumbs").width(C*91);$("#j-gallery").addClass("pageshow")}$("#sys-pro-gallery-1-thumbs a").click(function(){if($(this).is(".current")){return false}var H=$(this).attr("href");$("#sys-pro-gallery-1-picholder div.picholder").html('<a href="'+H+'" target="_blank" title="查看原图"><img src="'+H+'" alt="" onload="sysProGalleryResize();" rel="618,419" /></a>');
var G=$("#sys-pro-gallery-1-picholder div.picholder");var F=G.find("img");var J=F.height();G.hide().slideDown("slow");$(this).addClass("current").siblings().removeClass("current");var I=$(this).prevAll().length;if(C>6){var D=0;var E=$(this).nextAll().length;if(I<3){D=0}else{if(E<3){D=-91*(C-6)}else{D=-91*(I-2)}}$("#sys-pro-gallery-1-thumbs").animate({left:D+"px"},500)}return false});$("#sys-pro-gallery-1-prev").click(function(){var E=$("#sys-pro-gallery-1-thumbs a.current");var D=E.prevAll().length;if(D<1){$("#sys-pro-gallery-1-thumbs a").eq(-1).click()}else{E.prev().click()}return false});$("#sys-pro-gallery-1-next").click(function(){var E=$("#sys-pro-gallery-1-thumbs a.current");var D=E.nextAll().length;if(D<1){$("#sys-pro-gallery-1-thumbs a").eq(0).click()}else{E.next().click()}return false});var B;var y=function(){$("#sys-pro-gallery-1-next").click()};$("#sys-pro-gallery-1-auto").toggle(function(){$(this).removeClass().addClass("pause").attr("title","停止").text("停止");B=setInterval(y,5000)},function(){$(this).removeClass().addClass("play").attr("title","播放").text("播放");clearInterval(B)});$("#sys-pro-gallery-1-btnthumbs").toggle(function(){$("#sys-pro-gallery-1-thumbs").parent().slideDown("fast");$(this).html("<span>隐藏略缩图</span>")},function(){$("#sys-pro-gallery-1-thumbs").parent().slideUp("fast");$(this).html("<span>显示略缩图</span>")});$("#j-ctrl div.ctrl-link").hover(function(){$(this).addClass("show")},function(){$(this).removeClass("show")});var A=1;var z=6;$("#play_prev").click(function(){var H=$("#j-gallery").find("div.gallery-inner");var F=H.find("#sys-pro-gallery-1-thumbs");var E=H.width()+4;var D=F.find("a").length;var G=Math.ceil(D/z);if(!F.is(":animated")){if(A==1){F.animate({left:"-="+E*(G-1)},"slow");A=G}else{F.animate({left:"+="+E},"slow");A--}}});$("#play_next").click(function(){var H=$("#j-gallery").find("div.gallery-inner");var F=H.find("#sys-pro-gallery-1-thumbs");var E=H.width()+4;var D=F.find("a").length;var G=Math.ceil(D/z);if(!F.is(":animated")){if(A==G){F.animate({left:"0px"},"slow");A=1}else{F.animate({left:"-="+E},"slow");
A++}}});$("#sys-pro-gallery-1-picholder img").load(sysProGalleryResize)}j();(function(){if(!document.getElementById("float-tool")){return false}var B=$("#float-tool");var A=$("#float-tool-mini").parent().parent();var C=B.parent();if($.cookie("float-tool")=="open"){B.show();A.hide();C.removeClass("tool-wrap-mini")}if(!window.XMLHttpRequest){$(window).scroll(function(){B.parent().css({top:document.documentElement.scrollTop+document.body.scrollTop+130+"px"});A.parent().css({top:document.documentElement.scrollTop+document.body.scrollTop+130+"px"})})}else{B.parent().css({position:"fixed",top:"130",right:"0"});var z=function(){};z();$(window).resize(z);A.parent().css({position:"fixed",right:"0"})}var y=Date().split(" ");y[2]=Number(y[2])+7;y=y.join(" ");$("#float-tool-mini").click(function(){B.show();A.hide();C.removeClass("tool-wrap-mini");$.cookie("float-tool","open",{expires:y,path:"/"});return false});$("#float-tool-close").click(function(){B.hide();A.show();C.addClass("tool-wrap-mini");$.cookie("float-tool","close",{expires:y,path:"/"});return false});var D=$("#float-tool").find("li.type").length;if(D>4){$("#float-tool li.type").eq(3).nextAll().hide();$("#float-tool ul.tool-list").append('<li id="j-operate" class="operate"><a class="openbtn" href="javascript:void(0);">.</a></li>')}$("#j-operate a.openbtn").live("click",function(){var E=$(this).parent();E.prevAll().show();$(this).removeClass().addClass("closebtn")});$("#j-operate a.closebtn").live("click",function(){var E=$(this).parent();$("#float-tool li.type").eq(3).nextAll().hide();E.show();$(this).removeClass().addClass("openbtn")});$("#float-tool li.box").hover(function(){var F=$(this).find("div.parent");var E=$(this).find("div.child");E.show()},function(){var F=$(this).find("div.parent");var E=$(this).find("div.child");E.hide()})})();(function(){if(!document.getElementById("j-roll-btn")){return false}$("#j-roll-btn").hide();$(window).scroll(function(){var y=$(document).scrollTop(),z=$(window).height();if($(window).scrollTop()>=200){$("#j-roll-btn").fadeIn(300)
}else{$("#j-roll-btn").fadeOut(200)}});$("#j-roll-btn a").click(function(){$("html,body").animate({scrollTop:"0px"},100)})})();(function(){if(!document.getElementById("j-top-login")&&!document.getElementById("j-member-btn")){return false}var z=$("#j-top-login");var A=(function(){$("#j-login-btn").click(function(){var B=$(this).attr("j_url");$.ajax({type:"post",url:B,dataType:"text",success:function(C){$("#overlay-box").html(C);y()}});return false});$("#j-reg-form").submit(function(){var D=$(this).find("input.required,select.required,textarea.required");for(var G=0;G<D.length;G++){if(D.eq(G).val()==""||D.eq(G).val()==null){alert(langs.form.error_uncomplete);D.eq(G).focus();return false}}var F=$(this).find("blockquote.error");if(F.length>1||(F.length==1&&!F.parent().is(".row-submit"))){alert(langs.form.error_wrong);return false}var C=[];var G=0;$(this).find('input[name!=""]').each(function(){if(this.disabled||(this.checked==false&&(this.type=="checkbox"||this.type=="radio"))){}else{C[G++]=this.name+"="+$(this).val()}});$(this).find('select[name!=""]').each(function(){C[G++]=this.name+"="+$(this).val()});$(this).find('textarea[name!=""]').each(function(){C[G++]=this.name+"="+$(this).val()});var H=C.join("&");var I=$(this).attr("method");var B=$(this).attr("action");var E=(typeof B==="string")?$.trim(B):"";E=E||window.location.href||"";if(E){E=(E.match(/^([^#]+)/)||[])[1]}$.ajax({type:I,url:E,data:H,dataType:"json",success:function(J){if(J.status=="success"){$.documentMask();$("div.jquery_addmask").css("z-index","52");var K=($(window).height()-$("#j-overlay-tips").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(K<0){K=0}$('<div id="j-overlay-tips" class="overlay-tips" style="top:'+K+'px;"><div class="content-success"><p class="tips-title">您已注册成功！</p><div class="operate"><a class="orange-btn" href="/members/profile" title="进入个人中心">进入个人中心</a></div></div></div>').appendTo(document.body)}else{alert(J.msg)}}});return false})});var y=(function(){$("#j-reg-btn").click(function(){var B=$(this).attr("j_url");
$.ajax({type:"post",url:B,dataType:"text",success:function(C){$("#overlay-box").html(C);A()}});return false});$("#captcha img, #captcha a").click(function(){$("#captcha img").attr("src",$("#captcha img").attr("rel")+"?"+Math.random());$(this).parent().prev().find("input").val("").focus();return false});$("#j-login-form input").focus(function(){var B=$(this).parent().parent();B.find("blockquote").show()}).blur(function(){var C=$(this).parent().parent();var E=$(this).val();var B=C.find("blockquote");var D=B.attr("title");if($.trim(E)==""){B.removeClass("accepted").addClass("error").text(D)}else{B.removeClass("error").addClass("accepted").text("")}});$("#j-login-form").submit(function(){var E=$("#ipt-login-id");var K=$("#ipt-login-pwd");var I=E.val();var G=K.val();if(!I||$.trim(I)==""){E.focus();return false}if(!G||$.trim(G)==""){K.focus();return false}var F="data[username]="+I+"&data[password]="+G;var B=$("#ipt-captcha");if(B.length>0){var H=B.val();if(!H||$.trim(H)==""){B.focus();return false}else{F+=("&data[code]="+H)}}var C=$(this).attr("method");var J=$(this).attr("action");var D=(typeof J==="string")?$.trim(J):"";D=D||window.location.href||"";if(D){D=(D.match(/^([^#]+)/)||[])[1]}$.ajax({type:C,url:D,data:F,dataType:"json",success:function(L){if(L.status=="success"){location.href="/members/profile"}else{alert(L.msg)}}});return false})});$("#top-login-close").click(function(){z.remove()});$("#top-reg,.j-reg-btn").live('click',function(){$.documentMask();var C=($(window).height()-$("#j-overlay-mycart").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(C<0){C=0}$('<div id="j-overlay-user" class="overlay-user" style="top:'+C+'px;"><div class="close-btn"><a title="关闭" href="javascript:void(0);" class="close" id="j-close-btn">关闭</a></div><div class="box" id="overlay-box"></div></div>').appendTo(document.body);$("#j-close-btn").click(function(){var E=$("#j-overlay-user");var D=E.prev();E.remove();D.remove()});var B=$(this).attr("j_url");$.ajax({type:"POST",url:B,cache:false,dataType:"text",success:function(D){$("#overlay-box").html(D);
A()}});return false});$("#form-toplogin").submit(function(){var B=$("#login-username").val();var C=$("#login-password").val();if(B==""||B==null){alert("请输入用户名");return false}if(C==""||C==null){alert("请输入密码");return false}});$("#j-member-btn,.j-login-btn").live('click',function(){var B=$(this).attr("href");var C=$(this).attr("j_url");$.ajax({url:C,cache:false,dataType:"text",success:function(D){if(D=="logged already"){location.href=B}else{$.documentMask();var E=($(window).height()-$("#j-overlay-mycart").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(E<0){E=0}$('<div id="j-overlay-user" class="overlay-user" style="top:'+E+'px;"><div class="close-btn"><a title="关闭" href="javascript:void(0);" class="close" id="j-close-btn">关闭</a></div><div class="box" id="overlay-box"></div></div>').appendTo(document.body);$("#j-close-btn").click(function(){var G=$("#j-overlay-user");var F=G.prev();G.remove();F.remove()});$("#overlay-box").html(D);y()}}});return false})})();(function(){if(!document.getElementById("j-fast-member")){return false}var y=$("#j-fast-member");$("#j-fast-member div.member").hover(function(){$(this).children("div.child").show()},function(){$(this).children("div.child").hide()})})();(function(){if(!document.getElementById("j-order-table")){return false}$("#j-order-table a.j-pay-btn").click(function(){$.documentMask();var z=($(window).height()-$("#j-overlay-mycart").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(z<0){z=0}$('<div id="j-overlay-mycart" class="overlay-mycart" style="top:'+z+'px;"><div class="clearfix hd"><h2>我的购物车</h2><a id="j-close-btn" class="close" href="javascript:void(0);" title="关闭">关闭</a></div><div id="overlay-box" class="box"><div class="loading-tips">Loading</div></div></div>').appendTo(document.body);$("#j-close-btn").click(function(){var B=$("#j-overlay-mycart");var A=B.prev();B.remove();A.remove()});var y=$(this).attr("j_url");$.ajax({url:y,dataType:"text",success:function(A){$("#overlay-box").html(A);$("#j-back-btn").click(function(){var C=$("#j-overlay-mycart");
var B=C.prev();C.remove();B.remove()});$("#j-pay-form").submit(function(){$.documentMask();$("div.jquery_addmask").css("z-index","52");var C=($(window).height()-$("#j-overlay-tips").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(C<0){C=0}if($("#pay-money").is(":checked")){var B=jQuery(this).attr("action");$.ajax({type:"post",url:B,dataType:"json",data:"data[pay]=0",cache:false,success:function(D){if(D.status=="success"){$('<div id="j-overlay-tips" class="overlay-tips" style="top:'+C+'px;"><div class="content-success"><p class="tips-title">订单提交成功，请等待我们客服跟您联系！</p><div class="operate"><a class="orange-btn" href="/orders/myorders" title="确定">确 定</a></div></div></div>').appendTo(document.body)}}});return false}else{$('<div id="j-overlay-tips" class="overlay-tips" style="top:'+C+'px;"><div class="content-warning"><p class="tips-title">付款完成前请不要关闭此窗口！</p><p class="large">完成付款后请根据你的情况点击下面的按钮：</p><p class="orange">(请在新开网页上，完成付款后，再选择)</p><div class="operate"><a class="grey-btn" href="/products/myorders" title="已完成付款">已完成付款</a><a id="j-rechoose-btn" class="orange-btn" href="javascript:void(0);" title="重新选择付款">重新选择付款</a></div></div></div>').appendTo(document.body)}});$("#j-rechoose-btn").live("click",function(){var C=$(this).parents("#j-overlay-tips");var B=C.prev();C.remove();B.remove();$("div.jquery_addmask").css("z-index","50")})}})})})();(function(){if(!document.getElementById("j-product-view")){return false}var z=function(){var G=$("#product-show img");var C=G.width();var D=G.height();var E=Number((G.attr("rel").split(","))[0]);var F=Number((G.attr("rel").split(","))[1]);if(C<=E&&D<=F){}if(C>E&&D<=F){G.width(E)}if(C<=E&&D>F){G.height(F)}if(C>E&&D>F){if((C/D)>(E/F)){G.width(E)}else{G.height(F)}}};if(document.getElementById("product-show")){z()}$("#showpic-list ul a").click(function(){if($(this).parent().is(".selected")){return false}var N=$(this).parent();var J=parseInt(N.css("width"));var E=parseInt(N.css("margin-right"));var I=parseInt(N.css("border-right-width"));var K=parseInt(N.css("padding-right"));
var F=parseInt(N.css("margin-left"));var L=parseInt(N.css("border-left-width"));var O=parseInt(N.css("padding-left"));var H=(J+E+I+K+F+L+O);var M=$("#showpic-list ul a").length;var D=(N.prevAll("li").length)+1;var C=0;N.addClass("selected").siblings().removeClass("selected");var G=$(this).attr("href");$("#product-show").attr("href",G).find("img").attr("src",G);z();return false});$(".pro_args ul li a").click(function(){if($(this).parent().is("li.current")){}else{$(this).parent().parent().find("li.current").removeClass("current");$(this).parent().addClass("current");var L=$(".pro_args ul").length;var F=$(".pro_args ul li.current").length;if(L==F){var O="";$(".pro_args ul li.current").each(function(){O+=$(this).children().children("span").attr("data")+";"});O=O.substring(0,O.length-1);var E=$("#lbskuprop").html();var I=E.split(",");var P=I.length;var K=null;for(var H=0;H<P;H++){if(O==I[H]){K=H}}if(K===null){alert("参数选择错误1!");return false}var Q=$("#lbskuprice").html();var I=Q.split(",");var G=I.length;if(P!=G){alert("参数选择错误2!");return false}var J=I[K];var M=$("#lbskuquantities").html();var I=M.split(",");var D=I.length;if(P!=D){alert("参数选择错误3!");return false}var C=I[K];$("#p_num").html(C);$("#market_price").html(J);$("#product_num").attr("j_max",C);if(document.getElementById("discount_price")){var N=Number(J)*Number($("#lbdiscount").html());$(".memberprice").html(N)}}}});var y=function(){var D="";if($("#lbskuprop").html()==""){}else{$(".pro_args ul li.current").each(function(){D+=$(this).children().children("span").attr("data")+";"});D=D.substring(0,D.length-1);var C=$(".pro_args ul").length;var E=$(".pro_args ul li.current").length;if(C!=E){return false}if(D==""){return false}}return D};$("#j-btn-buy").click(function(){var C="";C=y();if(C===false){return false}var D=$("#product_num").val();var E=$(this).attr("href");E=E+"?num="+D+"&args="+C;$(this).attr("href",E);return true});$("#j-btn-add").click(function(){var D=$("#product_num").val();var E=$(this).attr("j_rel");var C="";C=y();if(C===false){return false}$.ajax({type:"post",url:E,data:"data[num]="+D+"&data[args]="+C,dataType:"json",success:function(F){if(F.status=="failed"){alert(F.msg);
return false}$.documentMask();var G=($(window).height()-$("#j-overlay-success").height())/2+document.documentElement.scrollTop+document.body.scrollTop;if(G<0){G=0}$('<div id="j-overlay-success" class="overlay-success" style="top:'+G+'px;"><a class="close-btn" href="javascript:void(0);" title="关闭">关闭</a><div class="content"><p class="title">已成功添加到购物车！</p><p class="grey">购物车里已有'+F.num+"种商品。总价"+F.amount+'元</p><div class="operate"><a class="btn" href="javascript:void(0);" title="查看购物车">查看购物车</a><a class="link" href="javascript:void(0);" title="继续购物">继续购物</a></div></div></div>').appendTo(document.body);$("#j-overlay-success a.close-btn, #j-overlay-success a.link").click(function(){var I=$("#j-overlay-success");var H=I.prev();I.remove();H.remove()});$("#j-overlay-success a.btn").click(function(){var I=$("#j-overlay-success");var H=I.prev();I.remove();H.remove();$("#j-cart-btn").click()})}})});(function(){if(!document.getElementById("j-proview-tag")){return false}$("#j-proview-tag a").click(function(){var F=$(this);if(F.is(".current")){return false}var E=F.parent().prevAll().length;var C=$("#j-proview-loader-"+E);C.show().siblings().hide();if(C.find("div.loading").length>0){var D=F.attr("j_load");$.ajax({url:D,dataType:"text",cache:false,success:function(G){C.html(G)}})}$("#j-proview-tag").find("a.current").removeClass("current");F.addClass("current");return false})})();var B=$("#j-num-choose input");var A=$("#j-num-choose a");B.keyup(function(){var C=$(this).val();var D=$(this).attr("j_max");$(this).val(C.replace(/[^0-9]/g,""));if(Number(C)<1||$.trim(C)==""){$(this).val(1)}if(Number(C)>Number(D)){$(this).val(1);alert("您所填写的数量超过库存,请重新填写。")}}).blur(function(){var C=$(this).val();if(C==""){$(this).val(1)}});A.click(function(){var C=Number(B.val());if($(this).is(".up")){C++}else{C--}if(C<1){C=1}var D=B.attr("j_max");if(Number(C)>Number(D)){B.val(1).blur();alert("数量超过库存,请重新填写。")}else{B.val(C).blur()}})})()});var proPager1=function(c){var a=c;var b=$(a).parent().parent().attr("j_load").split(" ");$.ajax({url:b[0]+$(a).attr("j_page")+b[1],dataType:"text",cache:false,success:function(d){$(a).parent().parent().parent().html(d)
}});return false};function AddFav(b,a){try{window.external.addFavorite(b,a)}catch(c){try{window.sidebar.addPanel(a,b,"")}catch(c){try{createShortcut()}catch(c){alert("抱歉，您所使用的浏览器无法完成此操作。\n\n您需要手动将其加入收藏。")}}}}function SetHome(c,a){try{c.style.behavior="url(#default#homepage)";c.setHomePage(a)}catch(b){if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){alert("抱歉，此操作被浏览器拒绝！\n\n请在浏览器地址栏输入“about:config”并回车然后将[signed.applets.codebase_principal_support]设置为'true'")}}else{alert("抱歉，您所使用的浏览器无法完成此操作。\n\n您需要手动将其设置为首页。")}}};
(function(b){var c,d,a;b.extend({roundaboutShapes:{def:"figure8",figure8:function(g,e,f){return{x:Math.sin(g*2+e),y:(Math.sin(g+Math.PI/2+e)/8)*f,z:(Math.cos(g+e)+1)/2,scale:(Math.sin(g+Math.PI/2+e)/2)+0.5}}}});c={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:0.4,maxOpacity:1,minScale:0.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:true,clickToFocusCallback:function(){},focusBearing:0,shape:"figure8",debug:false,childSelector:"li",startingChild:null,reflect:false,floatComparisonThreshold:0.001,autoplay:false,autoplayDuration:1000,autoplayPauseOnHover:false,autoplayCallback:function(){},enableDrag:false,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:true,triggerBlurEvents:true,responsive:false};d={autoplayInterval:null,autoplayIsRunning:false,animating:false,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:false,lastAnimationStep:false};a={init:function(f,i,h){var g,e=(new Date()).getTime();f=(typeof f==="object")?f:{};i=(b.isFunction(i))?i:function(){};i=(b.isFunction(f))?f:i;g=b.extend({},c,f,d);return this.each(function(){var k=b(this),j=k.children(g.childSelector).length,n=360/j,m=(g.startingChild&&g.startingChild>(j-1))?(j-1):g.startingChild,l=(g.startingChild===null)?g.bearing:360-(m*n),o=(k.css("position")!=="static")?k.css("position"):"relative";k.css({padding:0,position:o}).addClass("roundabout-holder").data("roundabout",b.extend({},g,{startingChild:m,bearing:l,oppositeOfFocusBearing:a.normalize.apply(null,[g.focusBearing-180]),dragBearing:l,period:n}));if(!h){if(g.clickToFocus){k.children(g.childSelector).each(function(p){b(this).bind("click.roundabout",function(){var q=a.getPlacement.apply(k,[p]);if(!a.isInFocus.apply(k,[q])){a.stopAnimation.apply(b(this));if(!k.data("roundabout").animating){a.animateBearingToFocus.apply(k,[q,k.data("roundabout").clickToFocusCallback])}return false}})})}if(g.btnNext){b(g.btnNext).bind("click.roundabout",function(){if(!k.data("roundabout").animating){a.animateToNextChild.apply(k,[k.data("roundabout").btnNextCallback])}return false})}if(g.btnPrev){b(g.btnPrev).bind("click.roundabout",function(){a.animateToPreviousChild.apply(k,[k.data("roundabout").btnPrevCallback]);return false})}if(g.btnToggleAutoplay){b(g.btnToggleAutoplay).bind("click.roundabout",function(){a.toggleAutoplay.apply(k);return false})}if(g.btnStartAutoplay){b(g.btnStartAutoplay).bind("click.roundabout",function(){a.startAutoplay.apply(k);return false})}if(g.btnStopAutoplay){b(g.btnStopAutoplay).bind("click.roundabout",function(){a.stopAutoplay.apply(k);return false})}if(g.autoplayPauseOnHover){k.bind("mouseenter.roundabout.autoplay",function(){a.stopAutoplay.apply(k,[true])}).bind("mouseleave.roundabout.autoplay",function(){a.startAutoplay.apply(k)})}if(g.enableDrag){if(!b.isFunction(k.drag)){if(g.debug){alert("You do not have the drag plugin loaded.")}}else{if(!b.isFunction(k.drop)){if(g.debug){alert("You do not have the drop plugin loaded.")}}else{k.drag(function(r,p){var q=k.data("roundabout"),s=(q.dragAxis.toLowerCase()==="x")?"deltaX":"deltaY";a.stopAnimation.apply(k);a.setBearing.apply(k,[q.dragBearing+p[s]/q.dragFactor])}).drop(function(q){var p=k.data("roundabout"),r=a.getAnimateToMethod(p.dropAnimateTo);a.allowAnimation.apply(k);a[r].apply(k,[p.dropDuration,p.dropEasing,p.dropCallback]);p.dragBearing=p.period*a.getNearestChild.apply(k)})}}k.each(function(){var p=b(this).get(0),r=b(this).data("roundabout"),q=(r.dragAxis.toLowerCase()==="x")?"pageX":"pageY",s=a.getAnimateToMethod(r.dropAnimateTo);if(p.addEventListener){p.addEventListener("touchstart",function(t){r.touchMoveStartPosition=t.touches[0][q]},false);p.addEventListener("touchmove",function(t){var u=(t.touches[0][q]-r.touchMoveStartPosition)/r.dragFactor;t.preventDefault();a.stopAnimation.apply(b(this));a.setBearing.apply(b(this),[r.dragBearing+u])},false);p.addEventListener("touchend",function(t){t.preventDefault();a.allowAnimation.apply(b(this));s=a.getAnimateToMethod(r.dropAnimateTo);a[s].apply(b(this),[r.dropDuration,r.dropEasing,r.dropCallback]);r.dragBearing=r.period*a.getNearestChild.apply(b(this))},false)}})}if(g.responsive){b(window).resize(function(){a.relayoutChildren.apply(k)})}}a.initChildren.apply(k,[i,h])})},initChildren:function(h,f){var e=b(this),g=e.data("roundabout");h=h||function(){};e.children(g.childSelector).each(function(m){var k,j,l,n=a.getPlacement.apply(e,[m]);if(f){k=b(this).data("roundabout").startWidth;j=b(this).data("roundabout").startHeight;l=b(this).data("roundabout").startFontSize}b(this).addClass("roundabout-moveable-item").css("position","absolute");b(this).data("roundabout",{startWidth:k||b(this).width(),startHeight:j||b(this).height(),startFontSize:l||parseInt(b(this).css("font-size"),10),degrees:n,backDegrees:a.normalize.apply(null,[n-180]),childNumber:m,currentScale:1,parent:e})});a.updateChildren.apply(e);if(g.autoplay){a.startAutoplay.apply(e)}e.trigger("ready");h.apply(e);return e},updateChildren:function(){return this.each(function(){var e=b(this),f=e.data("roundabout"),h=-1,g={bearing:f.bearing,tilt:f.tilt,stage:{width:Math.floor(b(this).width()*0.9),height:Math.floor(b(this).height()*0.9)},animating:f.animating,inFocus:f.childInFocus,focusBearingRadian:a.degToRad.apply(null,[f.focusBearing]),shape:b.roundaboutShapes[f.shape]||b.roundaboutShapes[b.roundaboutShapes.def]};g.midStage={width:g.stage.width/2,height:g.stage.height/2};g.nudge={width:g.midStage.width+(g.stage.width*0.05),height:g.midStage.height+(g.stage.height*0.05)};g.zValues={min:f.minZ,max:f.maxZ,diff:f.maxZ-f.minZ};g.opacity={min:f.minOpacity,max:f.maxOpacity,diff:f.maxOpacity-f.minOpacity};g.scale={min:f.minScale,max:f.maxScale,diff:f.maxScale-f.minScale};e.children(f.childSelector).each(function(j){if(a.updateChild.apply(e,[b(this),g,j,function(){b(this).trigger("ready")}])&&(!g.animating||f.lastAnimationStep)){h=j;b(this).addClass("roundabout-in-focus")}else{b(this).removeClass("roundabout-in-focus")}});if(h!==g.inFocus){if(f.triggerBlurEvents){e.children(f.childSelector).eq(g.inFocus).trigger("blur")}f.childInFocus=h;if(f.triggerFocusEvents&&h!==-1){e.children(f.childSelector).eq(h).trigger("focus")}}e.trigger("childrenUpdated")})},updateChild:function(h,g,e,m){var l,n=this,f=b(h),j=f.data("roundabout"),i=[],k=a.degToRad.apply(null,[(360-j.degrees)+g.bearing]);m=m||function(){};k=a.normalizeRad.apply(null,[k]);l=g.shape(k,g.focusBearingRadian,g.tilt);l.scale=(l.scale>1)?1:l.scale;l.adjustedScale=(g.scale.min+(g.scale.diff*l.scale)).toFixed(4);l.width=(l.adjustedScale*j.startWidth).toFixed(4);l.height=(l.adjustedScale*j.startHeight).toFixed(4);f.css({left:((l.x*g.midStage.width+g.nudge.width)-l.width/2).toFixed(0)+"px",top:((l.y*g.midStage.height+g.nudge.height)-l.height/2).toFixed(0)+"px",width:l.width+"px",height:l.height+"px",opacity:(g.opacity.min+(g.opacity.diff*l.scale)).toFixed(2),zIndex:Math.round(g.zValues.min+(g.zValues.diff*l.z)),fontSize:(l.adjustedScale*j.startFontSize).toFixed(1)+"px"});j.currentScale=l.adjustedScale;if(n.data("roundabout").debug){i.push('<div style="font-weight: normal; font-size: 10px; padding: 2px; width: '+f.css("width")+'; background-color: #ffc;">');i.push('<strong style="font-size: 12px; white-space: nowrap;">Child '+e+"</strong><br />");i.push("<strong>left:</strong> "+f.css("left")+"<br />");i.push("<strong>top:</strong> "+f.css("top")+"<br />");i.push("<strong>width:</strong> "+f.css("width")+"<br />");i.push("<strong>opacity:</strong> "+f.css("opacity")+"<br />");i.push("<strong>height:</strong> "+f.css("height")+"<br />");i.push("<strong>z-index:</strong> "+f.css("z-index")+"<br />");i.push("<strong>font-size:</strong> "+f.css("font-size")+"<br />");i.push("<strong>scale:</strong> "+f.data("roundabout").currentScale);i.push("</div>");f.html(i.join(""))}f.trigger("reposition");m.apply(n);return a.isInFocus.apply(n,[j.degrees])},setBearing:function(e,f){f=f||function(){};e=a.normalize.apply(null,[e]);this.each(function(){var l,g,j,i=b(this),k=i.data("roundabout"),h=k.bearing;k.bearing=e;i.trigger("bearingSet");a.updateChildren.apply(i);l=Math.abs(h-e);if(!k.animating||l>180){return}l=Math.abs(h-e);i.children(k.childSelector).each(function(n){var m;if(a.isChildBackDegreesBetween.apply(b(this),[e,h])){m=(h>e)?"Clockwise":"Counterclockwise";b(this).trigger("move"+m+"ThroughBack")}})});f.apply(this);return this},adjustBearing:function(f,e){e=e||function(){};if(f===0){return this}this.each(function(){a.setBearing.apply(b(this),[b(this).data("roundabout").bearing+f])});e.apply(this);return this},setTilt:function(e,f){f=f||function(){};this.each(function(){b(this).data("roundabout").tilt=e;a.updateChildren.apply(b(this))});f.apply(this);return this},adjustTilt:function(f,e){e=e||function(){};this.each(function(){a.setTilt.apply(b(this),[b(this).data("roundabout").tilt+f])});e.apply(this);return this},animateToBearing:function(f,g,j,h,i){var e=(new Date()).getTime();i=i||function(){};if(b.isFunction(h)){i=h;h=null}else{if(b.isFunction(j)){i=j;j=null}else{if(b.isFunction(g)){i=g;g=null}}}this.each(function(){var q,p,k,l=b(this),o=l.data("roundabout"),m=(!g)?o.duration:g,n=(j)?j:o.easing||"swing";if(!h){h={timerStart:e,start:o.bearing,totalTime:m}}q=e-h.timerStart;if(o.stopAnimation){a.allowAnimation.apply(l);o.animating=false;return}if(q<m){if(!o.animating){l.trigger("animationStart")}o.animating=true;if(typeof b.easing.def==="string"){p=b.easing[n]||b.easing[b.easing.def];k=p(null,q,h.start,f-h.start,h.totalTime)}else{k=b.easing[n]((q/h.totalTime),q,h.start,f-h.start,h.totalTime)}k=a.normalize.apply(null,[k]);o.dragBearing=k;a.setBearing.apply(l,[k,function(){setTimeout(function(){a.animateToBearing.apply(l,[f,m,n,h,i])},0)}])}else{if(o.animating){l.trigger("animationEnd")}o.lastAnimationStep=true;f=a.normalize.apply(null,[f]);a.setBearing.apply(l,[f]);o.animating=false;o.lastAnimationStep=false;o.dragBearing=f;i.apply(l)}});return this},animateToNearbyChild:function(e,g){var f=e[0],i=e[1],h=e[2]||function(){};if(b.isFunction(i)){h=i;i=null}else{if(b.isFunction(f)){h=f;f=null}}return this.each(function(){var n,l,k=b(this),p=k.data("roundabout"),m=(!p.reflect)?p.bearing%360:p.bearing,o=k.children(p.childSelector).length;if(!p.animating){if((p.reflect&&g==="previous")||(!p.reflect&&g==="next")){m=(Math.abs(m)<p.floatComparisonThreshold)?360:m;for(n=0;n<o;n+=1){l={lower:(p.period*n),upper:(p.period*(n+1))};l.upper=(n===o-1)?360:l.upper;if(m<=Math.ceil(l.upper)&&m>=Math.floor(l.lower)){if(o===2&&m===360){a.animateToDelta.apply(k,[-180,f,i,h])}else{a.animateBearingToFocus.apply(k,[l.lower,f,i,h])}break}}}else{m=(Math.abs(m)<p.floatComparisonThreshold||360-Math.abs(m)<p.floatComparisonThreshold)?0:m;for(n=o-1;n>=0;n-=1){l={lower:p.period*n,upper:p.period*(n+1)};l.upper=(n===o-1)?360:l.upper;if(m>=Math.floor(l.lower)&&m<Math.ceil(l.upper)){if(o===2&&m===360){a.animateToDelta.apply(k,[180,f,i,h])}else{a.animateBearingToFocus.apply(k,[l.upper,f,i,h])}break}}}}})},animateToNearestChild:function(e,g,f){f=f||function(){};if(b.isFunction(g)){f=g;g=null}else{if(b.isFunction(e)){f=e;e=null}}return this.each(function(){var h=a.getNearestChild.apply(b(this));a.animateToChild.apply(b(this),[h,e,g,f])})},animateToChild:function(e,f,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(f)){g=f;f=null}}return this.each(function(){var k,i=b(this),j=i.data("roundabout");if(j.childInFocus!==e&&!j.animating){k=i.children(j.childSelector).eq(e);a.animateBearingToFocus.apply(i,[k.data("roundabout").degrees,f,h,g])}})},animateToNextChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var i=b(this).data("roundabout").bearing+f;a.animateToBearing.apply(b(this),[i,e,h,g])})},animateBearingToFocus:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var i=b(this).data("roundabout").bearing-f;i=(Math.abs(360-i)<Math.abs(i))?360-i:-i;i=(i>180)?-(360-i):i;if(i!==0){a.animateToDelta.apply(b(this),[i,e,h,g])}})},stopAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=true})},allowAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=false})},startAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};clearInterval(g.autoplayInterval);g.autoplayInterval=setInterval(function(){a.animateToNextChild.apply(f,[e])},g.autoplayDuration);g.autoplayIsRunning=true;f.trigger("autoplayStart")})},stopAutoplay:function(e){return this.each(function(){clearInterval(b(this).data("roundabout").autoplayInterval);b(this).data("roundabout").autoplayInterval=null;b(this).data("roundabout").autoplayIsRunning=false;if(!e){b(this).unbind(".autoplay")}b(this).trigger("autoplayStop")})},toggleAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};if(!a.isAutoplaying.apply(b(this))){a.startAutoplay.apply(b(this),[e])}else{a.stopAutoplay.apply(b(this),[e])}})},isAutoplaying:function(){return(this.data("roundabout").autoplayIsRunning)},changeAutoplayDuration:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");g.autoplayDuration=e;if(a.isAutoplaying.apply(f)){a.stopAutoplay.apply(f);setTimeout(function(){a.startAutoplay.apply(f)},10)}})},normalize:function(f){var e=f%360;return(e<0)?360+e:e},normalizeRad:function(e){while(e<0){e+=(Math.PI*2)}while(e>(Math.PI*2)){e-=(Math.PI*2)}return e},isChildBackDegreesBetween:function(f,e){var g=b(this).data("roundabout").backDegrees;if(f>e){return(g>=e&&g<f)}else{return(g<e&&g>=f)}},getAnimateToMethod:function(e){e=e.toLowerCase();if(e==="next"){return"animateToNextChild"}else{if(e==="previous"){return"animateToPreviousChild"}}return"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var e=b(this),f=b.extend({},e.data("roundabout"));f.startingChild=e.data("roundabout").childInFocus;a.init.apply(e,[f,null,true])})},getNearestChild:function(){var e=b(this),g=e.data("roundabout"),f=e.children(g.childSelector).length;if(!g.reflect){return((f)-(Math.round(g.bearing/g.period)%f))%f}else{return(Math.round(g.bearing/g.period)%f)}},degToRad:function(e){return a.normalize.apply(null,[e])*Math.PI/180},getPlacement:function(f){var e=this.data("roundabout");return(!e.reflect)?360-(e.period*f):e.period*f},isInFocus:function(i){var h,e=this,g=e.data("roundabout"),f=a.normalize.apply(null,[g.bearing]);i=a.normalize.apply(null,[i]);h=Math.abs(f-i);return(h<=g.floatComparisonThreshold||h>=360-g.floatComparisonThreshold)}};b.fn.roundabout=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||b.isFunction(e)||!e){return a.init.apply(this,arguments)}else{b.error("Method "+e+" does not exist for jQuery.roundabout.")}}}})(jQuery);